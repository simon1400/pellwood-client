{"ast":null,"code":"var _jsxFileName = \"/Users/dmytropechunka/Desktop/work/pellwood/client/pages/thank-you/index.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect, useContext } from 'react';\nimport { DataStateContext } from '../../context/dataStateContext';\nimport Page from '../../layout/Page';\nimport Head from 'next/head';\nimport translate from '../../data/staticTranslate';\n\nconst ThankYou = ({\n  lang,\n  status,\n  dataGtag\n}) => {\n  _s();\n\n  const {\n    dataContextDispatch\n  } = useContext(DataStateContext);\n  useEffect(() => {\n    dataContextDispatch({\n      state: [],\n      type: 'basket'\n    });\n    dataContextDispatch({\n      state: 0,\n      type: 'basketCount'\n    });\n  }, [status]);\n  return __jsx(Page, {\n    className: \"thank-you-page base-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }\n  }, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, __jsx(\"script\", {\n    dangerouslySetInnerHTML: {\n      __html: `gtag('event', 'purchase', ${dataGtag})`\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  })), __jsx(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }, translate.thankOrder[lang]), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }, translate.thankInfo[lang]), !!status.length && status === 'PENDING' && __jsx(\"div\", {\n    className: \"uk-text-warning\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 51\n    }\n  }, translate.PayStatusWait[lang]), !!status.length && status === 'CANCELLED' && __jsx(\"div\", {\n    className: \"uk-text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 53\n    }\n  }, translate.PayStatusError[lang]), !!status.length && status === 'PAID' && __jsx(\"div\", {\n    className: \"uk-text-success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 48\n    }\n  }, translate.PayStatusOk[lang]), !!status.length && status === 'dobirka' && __jsx(\"div\", {\n    className: \"uk-text-success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 51\n    }\n  }, translate.PayStatusCash[lang]), __jsx(Link, {\n    href: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, __jsx(\"a\", {\n    className: \"tm-button tm-black-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 22\n    }\n  }, translate.backtohp[lang])));\n};\n\n_s(ThankYou, \"dSKUuAocYchnH9QvfMOGx4OJbtQ=\");\n\n_c = ThankYou;\nexport var __N_SSP = true;\nexport default ThankYou;\n\nvar _c;\n\n$RefreshReg$(_c, \"ThankYou\");","map":{"version":3,"sources":["/Users/dmytropechunka/Desktop/work/pellwood/client/pages/thank-you/index.js"],"names":["useEffect","useContext","DataStateContext","Page","Head","translate","ThankYou","lang","status","dataGtag","dataContextDispatch","state","type","__html","thankOrder","thankInfo","length","PayStatusWait","PayStatusError","PayStatusOk","PayStatusCash","backtohp"],"mappings":";;;;;AAAA,SAAQA,SAAR,EAAmBC,UAAnB,QAAoC,OAApC;AACA,SAASC,gBAAT,QAAiC,gCAAjC;AACA,OAAOC,IAAP,MAAiB,mBAAjB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,SAAP,MAAsB,4BAAtB;;AA8CA,MAAMC,QAAQ,GAAG,CAAC;AAACC,EAAAA,IAAD;AAAOC,EAAAA,MAAP;AAAeC,EAAAA;AAAf,CAAD,KAA8B;AAAA;;AAE7C,QAAM;AAAEC,IAAAA;AAAF,MAA0BT,UAAU,CAACC,gBAAD,CAA1C;AAEAF,EAAAA,SAAS,CAAC,MAAM;AACdU,IAAAA,mBAAmB,CAAC;AAAEC,MAAAA,KAAK,EAAE,EAAT;AAAaC,MAAAA,IAAI,EAAE;AAAnB,KAAD,CAAnB;AACAF,IAAAA,mBAAmB,CAAC;AAAEC,MAAAA,KAAK,EAAE,CAAT;AAAYC,MAAAA,IAAI,EAAE;AAAlB,KAAD,CAAnB;AACD,GAHQ,EAGN,CAACJ,MAAD,CAHM,CAAT;AAKA,SACE,MAAC,IAAD;AAAM,IAAA,SAAS,EAAC,0BAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAQ,IAAA,uBAAuB,EAAE;AAACK,MAAAA,MAAM,EAAG,6BAA4BJ,QAAS;AAA/C,KAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKJ,SAAS,CAACS,UAAV,CAAqBP,IAArB,CAAL,CAJF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIF,SAAS,CAACU,SAAV,CAAoBR,IAApB,CAAJ,CALF,EAMG,CAAC,CAACC,MAAM,CAACQ,MAAT,IAAmBR,MAAM,KAAK,SAA9B,IAA2C;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAkCH,SAAS,CAACY,aAAV,CAAwBV,IAAxB,CAAlC,CAN9C,EAOG,CAAC,CAACC,MAAM,CAACQ,MAAT,IAAmBR,MAAM,KAAK,WAA9B,IAA6C;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAiCH,SAAS,CAACa,cAAV,CAAyBX,IAAzB,CAAjC,CAPhD,EAQG,CAAC,CAACC,MAAM,CAACQ,MAAT,IAAmBR,MAAM,KAAK,MAA9B,IAAwC;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAkCH,SAAS,CAACc,WAAV,CAAsBZ,IAAtB,CAAlC,CAR3C,EASG,CAAC,CAACC,MAAM,CAACQ,MAAT,IAAmBR,MAAM,KAAK,SAA9B,IAA2C;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAkCH,SAAS,CAACe,aAAV,CAAwBb,IAAxB,CAAlC,CAT9C,EAWE,MAAC,IAAD;AAAM,IAAA,IAAI,EAAC,GAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAe;AAAG,IAAA,SAAS,EAAC,2BAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA0CF,SAAS,CAACgB,QAAV,CAAmBd,IAAnB,CAA1C,CAAf,CAXF,CADF;AAeD,CAxBD;;GAAMD,Q;;KAAAA,Q;;AA0BN,eAAeA,QAAf","sourcesContent":["import {useEffect, useContext} from 'react'\nimport { DataStateContext } from '../../context/dataStateContext'\nimport Page from '../../layout/Page'\nimport Head from 'next/head'\nimport translate from '../../data/staticTranslate'\nimport gtag from '../../functions/gtag'\nimport {AxiosAPI} from '../../restClient'\nimport localize from '../../data/localize'\n\nexport async function getServerSideProps({query, locale}) {\n\n  const {lang} = localize(locale)\n  if (!query.refId) {\n    return {\n      redirect: {\n        destination: '/not-found',\n        permanent: false,\n      },\n    }\n  }\n\n  const res = await AxiosAPI.get(`/payment/status/${query.refId}`)\n\n  const order = res.data.data[0]\n\n  AxiosAPI.post(`/send/orderInfo`, order)\n  .then(resMail => console.log(resMail.data))\n  .catch(err => console.log('Send Email error --- ', err))\n\n  var status = '', dataGtag;\n\n  if(order.payOnline) {\n    status = order.status\n    if(status !== 'PENDING' && status !== 'CANCELLED'){\n      dataGtag = gtag(order)\n    }\n  }else{\n    status = 'dobirka'\n    dataGtag = gtag(order)\n  }\n\n  return {\n    props: {\n      lang,\n      status,\n      dataGtag\n    }\n  }\n}\n\nconst ThankYou = ({lang, status, dataGtag}) => {\n\n  const { dataContextDispatch } = useContext(DataStateContext)\n\n  useEffect(() => {\n    dataContextDispatch({ state: [], type: 'basket' })\n    dataContextDispatch({ state: 0, type: 'basketCount' })\n  }, [status])\n\n  return(\n    <Page className=\"thank-you-page base-page\">\n      <Head>\n        <script dangerouslySetInnerHTML={{__html: `gtag('event', 'purchase', ${dataGtag})`}} />\n      </Head>\n      <h1>{translate.thankOrder[lang]}</h1>\n      <p>{translate.thankInfo[lang]}</p>\n      {!!status.length && status === 'PENDING' && <div className=\"uk-text-warning\">{translate.PayStatusWait[lang]}</div>}\n      {!!status.length && status === 'CANCELLED' && <div className=\"uk-text-danger\">{translate.PayStatusError[lang]}</div>}\n      {!!status.length && status === 'PAID' && <div className=\"uk-text-success\">{translate.PayStatusOk[lang]}</div>}\n      {!!status.length && status === 'dobirka' && <div className=\"uk-text-success\">{translate.PayStatusCash[lang]}</div>}\n\n      <Link href=\"/\"><a className=\"tm-button tm-black-button\">{translate.backtohp[lang]}</a></Link>\n    </Page>\n  )\n}\n\nexport default ThankYou\n"]},"metadata":{},"sourceType":"module"}