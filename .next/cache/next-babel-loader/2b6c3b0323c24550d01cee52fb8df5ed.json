{"ast":null,"code":"var _jsxFileName = \"/Users/dmytropechunka/Desktop/work/pellwood/client/pages/thank-you/index.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect, useContext } from 'react';\nimport { DataStateContext } from '../../context/dataStateContext';\nimport translate from '../../data/staticTranslate';\nimport gtag from '../../functions/gtag';\nimport { AxiosAPI } from '../../restClient';\nimport { useRouter } from 'next/router';\n\nconst ThankYou = () => {\n  _s();\n\n  const router = useRouter();\n  const {\n    0: status,\n    1: setStatus\n  } = useState('');\n  const {\n    0: lang,\n    1: setLang\n  } = useState('');\n  const {\n    dataContextDispatch\n  } = useContext(DataStateContext);\n  useEffect(() => {\n    var serchUrl = getUrl(window.location.search);\n\n    if (!router.query.refId) {\n      window.location.href = '/not-found';\n      return;\n    }\n\n    dataContextDispatch({\n      state: [],\n      type: 'basket'\n    });\n    dataContextDispatch({\n      state: 0,\n      type: 'basketCount'\n    });\n    AxiosAPI.get(`/payment/status/${router.query.refId}`).then(res => {\n      const order = res.data.data[0]; // AxiosAPI.post(`/send/orderInfo`, res.data.data[0])\n      // .then(resMail => console.log(resMail.data))\n      // .catch(err => console.log('Send Email error --- ', err))\n\n      if (order.payOnline) {\n        setStatus(order.status);\n\n        if (order.status !== 'PENDING' && order.status !== 'CANCELLED') {\n          gtag(order);\n        }\n      } else {\n        setStatus('dobirka');\n        gtag(order);\n      }\n\n      setLang(res.data.data[0].currency === 'Kč' ? 'cz' : 'en');\n    }).catch(err => console.log('Error get status order --- ', err));\n  }, []);\n  return __jsx(\"div\", {\n    className: \"thank-you-page base-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }\n  }, __jsx(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }\n  }, translate.thankOrder[lang]), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }\n  }, translate.thankInfo[lang]), !!status.length && status === 'PENDING' && __jsx(\"div\", {\n    className: \"uk-text-warning\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 51\n    }\n  }, translate.PayStatusWait[lang]), !!status.length && status === 'CANCELLED' && __jsx(\"div\", {\n    className: \"uk-text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 53\n    }\n  }, translate.PayStatusError[lang]), !!status.length && status === 'PAID' && __jsx(\"div\", {\n    className: \"uk-text-success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 48\n    }\n  }, translate.PayStatusOk[lang]), !!status.length && status === 'dobirka' && __jsx(\"div\", {\n    className: \"uk-text-success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 51\n    }\n  }, translate.PayStatusCash[lang]), __jsx(\"a\", {\n    href: \"/\",\n    className: \"tm-button tm-black-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }\n  }, translate.backtohp[lang]));\n};\n\n_s(ThankYou, \"GFrLwbSG8wr+dBMysRjYollgZGo=\", false, function () {\n  return [useRouter];\n});\n\n_c = ThankYou;\nexport default ThankYou;\n\nvar _c;\n\n$RefreshReg$(_c, \"ThankYou\");","map":{"version":3,"sources":["/Users/dmytropechunka/Desktop/work/pellwood/client/pages/thank-you/index.js"],"names":["useState","useEffect","useContext","DataStateContext","translate","gtag","AxiosAPI","useRouter","ThankYou","router","status","setStatus","lang","setLang","dataContextDispatch","serchUrl","getUrl","window","location","search","query","refId","href","state","type","get","then","res","order","data","payOnline","currency","catch","err","console","log","thankOrder","thankInfo","length","PayStatusWait","PayStatusError","PayStatusOk","PayStatusCash","backtohp"],"mappings":"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","sourcesContent":["import {useState, useEffect, useContext} from 'react'\nimport { DataStateContext } from '../../context/dataStateContext'\nimport translate from '../../data/staticTranslate'\nimport gtag from '../../functions/gtag'\nimport {AxiosAPI} from '../../restClient'\nimport { useRouter } from 'next/router'\n\nconst ThankYou = () => {\n\n  const router = useRouter()\n  const [status, setStatus] = useState('')\n  const [lang, setLang] = useState('')\n  const { dataContextDispatch } = useContext(DataStateContext)\n\n  useEffect(() => {\n\n    var serchUrl = getUrl(window.location.search);\n    if(!router.query.refId){ window.location.href = '/not-found'; return;}\n\n    dataContextDispatch({ state: [], type: 'basket' })\n    dataContextDispatch({ state: 0, type: 'basketCount' })\n\n    AxiosAPI.get(`/payment/status/${router.query.refId}`).then(res => {\n      const order = res.data.data[0]\n\n      // AxiosAPI.post(`/send/orderInfo`, res.data.data[0])\n      // .then(resMail => console.log(resMail.data))\n      // .catch(err => console.log('Send Email error --- ', err))\n\n      if(order.payOnline) {\n        setStatus(order.status)\n        if(order.status !== 'PENDING' && order.status !== 'CANCELLED'){\n          gtag(order)\n        }\n      }else{\n        setStatus('dobirka')\n        gtag(order)\n      }\n\n      setLang(res.data.data[0].currency === 'Kč' ? 'cz' : 'en')\n\n    }).catch(err => console.log('Error get status order --- ', err))\n\n  }, [])\n\n  return(\n    <div className=\"thank-you-page base-page\">\n      <h1>{translate.thankOrder[lang]}</h1>\n      <p>{translate.thankInfo[lang]}</p>\n      {!!status.length && status === 'PENDING' && <div className=\"uk-text-warning\">{translate.PayStatusWait[lang]}</div>}\n      {!!status.length && status === 'CANCELLED' && <div className=\"uk-text-danger\">{translate.PayStatusError[lang]}</div>}\n      {!!status.length && status === 'PAID' && <div className=\"uk-text-success\">{translate.PayStatusOk[lang]}</div>}\n      {!!status.length && status === 'dobirka' && <div className=\"uk-text-success\">{translate.PayStatusCash[lang]}</div>}\n\n      <a href=\"/\" className=\"tm-button tm-black-button\">{translate.backtohp[lang]}</a>\n    </div>\n  )\n}\n\nexport default ThankYou\n"]},"metadata":{},"sourceType":"module"}