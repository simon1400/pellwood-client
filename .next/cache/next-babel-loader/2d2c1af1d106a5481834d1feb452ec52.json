{"ast":null,"code":"var _jsxFileName = \"/Users/dmytropechunka/Desktop/work/pellwood/client/layout/Canvas.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect, useContext } from 'react';\nimport Link from 'next/link';\nimport { offcanvas } from 'uikit';\nimport translate from '../data/staticTranslate';\nimport { DataStateContext } from '../context/dataStateContext';\nimport localize from '../data/localize';\nimport { useRouter } from 'next/router';\n\nconst Canvas = () => {\n  const router = useRouter();\n  const {\n    lang,\n    currency\n  } = localize(router.locale);\n  const {\n    dataContextState,\n    dataContextDispatch\n  } = useContext(DataStateContext);\n  const {\n    0: basket,\n    1: setBasket\n  } = useState(dataContextState.basket);\n  const {\n    0: basketCount,\n    1: setBasketCount\n  } = useState(dataContextState.basketCount);\n  const {\n    0: sum,\n    1: setSum\n  } = useState(0);\n  const {\n    0: sale,\n    1: setSale\n  } = useState(0);\n\n  const closeCanvas = () => {\n    offcanvas('#offcanvas-flip').hide();\n  };\n\n  const onSumItems = () => {\n    let sumAll = 0,\n        sumItem = 0;\n\n    if (basket) {\n      basket.map((item, index) => {\n        if (item.variantPrice instanceof String) {\n          sumItem = item.variantPrice.split(' ')[0] * item.countVariant;\n        } else {\n          sumItem = item.variantPrice * item.countVariant;\n        }\n\n        sumAll = +sumItem + sumAll;\n      });\n    }\n\n    if (lang === 'en' && sumAll > 150) {\n      setSale((Math.round(sumAll * 0.05 * 100) / 100).toFixed(2));\n      sumAll = sumAll - sumAll * 0.05;\n    } else if (lang === 'cz' && sumAll > 2000) {\n      setSale(Math.round(sumAll * 0.05));\n      sumAll = sumAll - sumAll * 0.05;\n    }\n\n    if (lang === 'en' && sumAll <= 150 || lang === 'cz' && sumAll <= 2000) {\n      setSale(0);\n    }\n\n    if (lang === 'en') {\n      setSum((Math.round(sumAll * 100) / 100).toFixed(2));\n    } else {\n      setSum(Math.round(sumAll));\n    }\n  };\n\n  useEffect(() => {\n    onSumItems();\n  }, []);\n  useEffect(() => {\n    setBasket(dataContextState.basket);\n    setBasketCount(dataContextState.basketCount);\n    onSumItems();\n  }, [router.query.length]);\n  useEffect(() => {\n    dataContextDispatch({\n      state: basket,\n      type: 'basket'\n    });\n    dataContextDispatch({\n      state: basketCount,\n      type: 'basketCount'\n    });\n  }, [basketCount]);\n\n  const deleteItem = e => {\n    e.preventDefault();\n    basket.map((item, index) => {\n      if (item.id === e.currentTarget.dataset.id && item.variantName === e.currentTarget.dataset.name) {\n        basket.splice(index, 1);\n      }\n    });\n    let newBasketCount = +basketCount - 1;\n    setBasketCount(newBasketCount);\n    setBasket(basket);\n  };\n\n  return __jsx(\"div\", {\n    id: \"offcanvas-flip\",\n    \"uk-offcanvas\": \"flip: true; overlay: true;\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"uk-offcanvas-bar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"tm-canvas-head\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }, __jsx(\"span\", {\n    className: \"tm-circle-count\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }, basketCount ? basketCount : 0), __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 11\n    }\n  }, translate.basket[lang]), __jsx(Link, {\n    href: router.asPath,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }, __jsx(\"a\", {\n    className: \"tm-canvas-close uk-close-large\",\n    type: \"button\",\n    \"uk-close\": \"\",\n    onClick: e => closeCanvas(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }))), basketCount && sum ? __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 31\n    }\n  }, !!basket.length && basket.map((item, index) => __jsx(\"div\", {\n    key: index,\n    className: \"tm-canvas-basket-item-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 59\n    }\n  }, __jsx(\"div\", {\n    className: \"tm-basket-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    \"data-src\": item.imgUrl,\n    className: \"tm-basket-img-wrap uk-background-contain\",\n    \"uk-img\": \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 15\n    }\n  }), __jsx(\"div\", {\n    className: \"tm-basket-item-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 15\n    }\n  }, __jsx(\"h3\", {\n    className: \"tm-basket-item-head\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  }, item.nameProduct), __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, item.variantName), __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  }, item.variantPrice instanceof String ? item.variantPrice : item.variantPrice + ' ' + currency), __jsx(\"div\", {\n    className: \"tm-canvas-basket-item-count\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 17\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 19\n    }\n  }, item.countVariant, \" \", translate.pc[lang]), __jsx(Link, {\n    href: router.asPath + '?delete' + item.id + item.variantName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 19\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 21\n    }\n  }, __jsx(\"button\", {\n    className: \"tm-canvas-item-remove\",\n    \"data-id\": item.id,\n    \"data-name\": item.variantName,\n    type: \"button\",\n    onClick: e => deleteItem(e),\n    \"uk-close\": \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 23\n    }\n  })))))))), __jsx(\"div\", {\n    className: \"tm-basket-total\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 11\n    }\n  }, __jsx(\"table\", {\n    className: \"uk-table uk-table-divider\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  }, __jsx(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 15\n    }\n  }, __jsx(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }\n  }, __jsx(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 19\n    }\n  }, translate.delivery[lang]), __jsx(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 19\n    }\n  }, __jsx(\"span\", {\n    className: `${lang === 'en' && sum > 100 || lang === 'cz' && sum > 1500 && \"tm-positive\"}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 21\n    }\n  }, lang === 'cz' && sum <= 1500 && 'od 150 Kč', lang === 'en' && sum <= 100 && '10 €', lang === 'en' && sum > 100 && translate.free[lang], lang === 'cz' && sum > 1500 && translate.free[lang]))), (lang === 'cz' && sum <= 1500 || lang === 'en' && sum <= 100) && __jsx(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 87\n    }\n  }, __jsx(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 19\n    }\n  }, translate.deliveryFreeCanvas[lang]), __jsx(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 19\n    }\n  }, translate.deliveryFreeCanvasValue[lang])), (lang === 'cz' && sum <= 2000 || lang === 'en' && sum <= 150) && __jsx(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 87\n    }\n  }, __jsx(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 19\n    }\n  }, translate.saleCanvas[lang]), __jsx(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 19\n    }\n  }, translate.saleCanvasValue[lang])), sale > 0 && __jsx(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 30\n    }\n  }, __jsx(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 19\n    }\n  }, translate.sale[lang]), __jsx(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 19\n    }\n  }, \"-\", sale, \" \", currency)), __jsx(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 17\n    }\n  }, __jsx(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 19\n    }\n  }, translate.totalprice[lang]), __jsx(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 19\n    }\n  }, sum, \" \", currency))))), __jsx(\"div\", {\n    className: \"tm-basket-footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 11\n    }\n  }, __jsx(Link, {\n    href: \"/basket\",\n    className: \"tm-button tm-bare-button\",\n    onClick: () => closeCanvas(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 15\n    }\n  }, translate.basket[lang])), __jsx(Link, {\n    href: \"/basket/checkout\",\n    className: \"tm-button tm-black-button\",\n    onClick: () => closeCanvas(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 15\n    }\n  }, translate.checkout[lang])))) : __jsx(\"p\", {\n    className: \"uk-text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 18\n    }\n  }, translate.emptybasket[lang])));\n};\n\nexport default Canvas;","map":{"version":3,"sources":["/Users/dmytropechunka/Desktop/work/pellwood/client/layout/Canvas.js"],"names":["useState","useEffect","useContext","Link","offcanvas","translate","DataStateContext","localize","useRouter","Canvas","router","lang","currency","locale","dataContextState","dataContextDispatch","basket","setBasket","basketCount","setBasketCount","sum","setSum","sale","setSale","closeCanvas","hide","onSumItems","sumAll","sumItem","map","item","index","variantPrice","String","split","countVariant","Math","round","toFixed","query","length","state","type","deleteItem","e","preventDefault","id","currentTarget","dataset","variantName","name","splice","newBasketCount","asPath","imgUrl","nameProduct","pc","delivery","free","deliveryFreeCanvas","deliveryFreeCanvasValue","saleCanvas","saleCanvasValue","totalprice","checkout","emptybasket"],"mappings":"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","sourcesContent":["import {useState, useEffect, useContext} from 'react';\nimport Link from 'next/link'\nimport {offcanvas} from 'uikit'\nimport translate from '../data/staticTranslate'\nimport { DataStateContext } from '../context/dataStateContext'\nimport localize from '../data/localize'\nimport { useRouter } from 'next/router'\n\nconst Canvas = () => {\n\n  const router = useRouter()\n  const {lang, currency} = localize(router.locale)\n\n  const { dataContextState, dataContextDispatch } = useContext(DataStateContext)\n  const [basket, setBasket] = useState(dataContextState.basket)\n  const [basketCount, setBasketCount] = useState(dataContextState.basketCount)\n  const [sum, setSum] = useState(0)\n  const [sale, setSale] = useState(0)\n\n  const closeCanvas = () => {\n    offcanvas('#offcanvas-flip').hide();\n  }\n\n  const onSumItems = () => {\n    let sumAll = 0, sumItem = 0;\n\n    if(basket){\n      basket.map((item, index) => {\n        if(item.variantPrice instanceof String){\n          sumItem = item.variantPrice.split(' ')[0] * item.countVariant\n        }else{\n          sumItem = item.variantPrice * item.countVariant\n        }\n\n        sumAll = +sumItem + sumAll\n      })\n    }\n\n    if(lang === 'en' && sumAll > 150){\n      setSale((Math.round(sumAll * 0.05 * 100) / 100).toFixed(2))\n      sumAll = sumAll - (sumAll * 0.05)\n    }else if(lang === 'cz' && sumAll > 2000) {\n      setSale(Math.round(sumAll * 0.05))\n      sumAll = sumAll - (sumAll * 0.05)\n    }\n\n    if(lang === 'en' && sumAll <= 150 || lang === 'cz' && sumAll <= 2000){\n      setSale(0)\n    }\n\n    if(lang === 'en'){\n      setSum((Math.round(sumAll * 100) / 100).toFixed(2));\n    }else{\n      setSum(Math.round(sumAll));\n    }\n  }\n\n  useEffect(() => {\n    onSumItems()\n  }, [])\n\n  useEffect(() => {\n    setBasket(dataContextState.basket)\n    setBasketCount(dataContextState.basketCount)\n    onSumItems()\n  }, [router.query.length])\n\n\n  useEffect(() => {\n    dataContextDispatch({ state: basket, type: 'basket' })\n    dataContextDispatch({ state: basketCount, type: 'basketCount' })\n  }, [basketCount])\n\n  const deleteItem = (e) => {\n    e.preventDefault()\n    basket.map((item, index) => {\n      if(item.id === e.currentTarget.dataset.id && item.variantName === e.currentTarget.dataset.name){\n        basket.splice(index, 1)\n      }\n    })\n    let newBasketCount = +basketCount - 1\n    setBasketCount(newBasketCount)\n    setBasket(basket)\n  }\n\n  return(\n    <div id=\"offcanvas-flip\" uk-offcanvas=\"flip: true; overlay: true;\">\n      <div className=\"uk-offcanvas-bar\">\n\n        <div className=\"tm-canvas-head\">\n          <span className=\"tm-circle-count\">{basketCount ? basketCount : 0}</span>\n          <h2>{translate.basket[lang]}</h2>\n          <Link href={router.asPath}>\n            <a className=\"tm-canvas-close uk-close-large\" type=\"button\" uk-close=\"\" onClick={e => closeCanvas()}></a>\n          </Link>\n        </div>\n        {basketCount && sum ? <div>\n          {!!basket.length && basket.map((item, index) => <div key={index} className=\"tm-canvas-basket-item-wrap\">\n            <div className=\"tm-basket-item\">\n              <div data-src={item.imgUrl} className=\"tm-basket-img-wrap uk-background-contain\" uk-img=\"\"></div>\n              <div className=\"tm-basket-item-info\">\n                <h3 className=\"tm-basket-item-head\">{item.nameProduct}</h3>\n                <span>{item.variantName}</span>\n                <span>{item.variantPrice instanceof String ? item.variantPrice : item.variantPrice + ' ' + currency}</span>\n                <div className=\"tm-canvas-basket-item-count\">\n                  <span>{item.countVariant} {translate.pc[lang]}</span>\n                  <Link href={router.asPath + '?delete'+item.id+item.variantName}>\n                    <a>\n                      <button\n                        className=\"tm-canvas-item-remove\"\n                        data-id={item.id}\n                        data-name={item.variantName}\n                        type=\"button\"\n                        onClick={e => deleteItem(e)}\n                        uk-close=\"\">\n                      </button>\n                    </a>\n                  </Link>\n                </div>\n              </div>\n            </div>\n          </div>)}\n\n          <div className=\"tm-basket-total\">\n            <table className=\"uk-table uk-table-divider\">\n              <tbody>\n                <tr>\n                  <td>{translate.delivery[lang]}</td>\n                  <td>\n                    <span className={`${lang === 'en' && sum > 100 || lang === 'cz' && sum > 1500 && \"tm-positive\"}`}>\n                      {lang === 'cz' && sum <= 1500 && 'od 150 Kč'}\n                      {lang === 'en' && sum <= 100 && '10 €'}\n                      {lang === 'en' && sum > 100 && translate.free[lang]}\n                      {lang === 'cz' && sum > 1500 && translate.free[lang]}\n                    </span>\n                  </td>\n                </tr>\n                {((lang === 'cz' && sum <= 1500) || (lang === 'en' && sum <= 100)) && <tr>\n                  <td>{translate.deliveryFreeCanvas[lang]}</td>\n                  <td>{translate.deliveryFreeCanvasValue[lang]}</td>\n                </tr>}\n                {((lang === 'cz' && sum <= 2000) || (lang === 'en' && sum <= 150)) && <tr>\n                  <td>{translate.saleCanvas[lang]}</td>\n                  <td>{translate.saleCanvasValue[lang]}</td>\n                </tr>}\n                {sale > 0 && <tr>\n                  <td>{translate.sale[lang]}</td>\n                  <td>-{sale} {currency}</td>\n                </tr>}\n                <tr>\n                  <td>{translate.totalprice[lang]}</td>\n                  <td>{sum} {currency}</td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n\n          <div className=\"tm-basket-footer\">\n            <Link href=\"/basket\" className=\"tm-button tm-bare-button\" onClick={() => closeCanvas()}>\n              <a>{translate.basket[lang]}</a>\n            </Link>\n            <Link href=\"/basket/checkout\" className=\"tm-button tm-black-button\" onClick={() => closeCanvas()}>\n              <a>{translate.checkout[lang]}</a>\n            </Link>\n          </div>\n\n        </div> : <p className=\"uk-text-center\">{translate.emptybasket[lang]}</p>}\n\n      </div>\n    </div>\n  )\n}\n\nexport default Canvas\n"]},"metadata":{},"sourceType":"module"}