{"ast":null,"code":"var _jsxFileName = \"/Users/dmytropechunka/Desktop/work/pellwood/client/pages/thank-you/index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect, useContext } from 'react';\nimport { DataStateContext } from '../../context/dataStateContext';\nimport translate from '../../data/staticTranslate';\nimport gtag from '../../functions/gtag';\nimport { AxiosAPI } from '../../restClient';\nimport { useRouter } from 'next/router';\nexport async function getServerSideProps(context) {\n  var _data$settings$filter;\n\n  console.log(context); // if(!router.query.refId){ router.push('/not-found'); return;}\n\n  return;\n  dataContextDispatch({\n    state: [],\n    type: 'basket'\n  });\n  dataContextDispatch({\n    state: 0,\n    type: 'basketCount'\n  });\n  AxiosAPI.get(`/payment/status/${router.query.refId}`).then(res => {\n    const order = res.data.data[0]; // AxiosAPI.post(`/send/orderInfo`, res.data.data[0])\n    // .then(resMail => console.log(resMail.data))\n    // .catch(err => console.log('Send Email error --- ', err))\n\n    if (order.payOnline) {\n      setStatus(order.status);\n\n      if (order.status !== 'PENDING' && order.status !== 'CANCELLED') {\n        gtag(order);\n      }\n    } else {\n      setStatus('dobirka');\n      gtag(order);\n    }\n\n    setLang(res.data.data[0].currency === 'Kč' ? 'cz' : 'en');\n  }).catch(err => console.log('Error get status order --- ', err));\n  return {\n    props: {\n      category: data.category.filter(item => item === null || item === void 0 ? void 0 : item._id),\n      settings: (_data$settings$filter = data.settings.filter(item => item === null || item === void 0 ? void 0 : item.titleCategory)) === null || _data$settings$filter === void 0 ? void 0 : _data$settings$filter[0],\n      articleFirst: shuffle(data.articles.filter(item => {\n        var _item$lang;\n\n        return (_item$lang = item[lang]) === null || _item$lang === void 0 ? void 0 : _item$lang.category._ref.includes(\"3252355e-13f2-4628-8db4-a90bb522713b\");\n      }), 0),\n      articleSeccond: shuffle(data.articles.filter(item => {\n        var _item$lang2;\n\n        return (_item$lang2 = item[lang]) === null || _item$lang2 === void 0 ? void 0 : _item$lang2.category._ref.includes(\"53b17b89-299c-48b1-b332-26240fc0e624\");\n      }), 1),\n      lang,\n      currency\n    }\n  };\n}\n\nconst ThankYou = () => {\n  const router = useRouter();\n  const {\n    0: status,\n    1: setStatus\n  } = useState('');\n  const {\n    0: lang,\n    1: setLang\n  } = useState('');\n  const {\n    dataContextDispatch\n  } = useContext(DataStateContext);\n  useEffect(() => {}, []);\n  return __jsx(\"div\", {\n    className: \"thank-you-page base-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  }, __jsx(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, translate.thankOrder[lang]), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, translate.thankInfo[lang]), !!status.length && status === 'PENDING' && __jsx(\"div\", {\n    className: \"uk-text-warning\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 51\n    }\n  }, translate.PayStatusWait[lang]), !!status.length && status === 'CANCELLED' && __jsx(\"div\", {\n    className: \"uk-text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 53\n    }\n  }, translate.PayStatusError[lang]), !!status.length && status === 'PAID' && __jsx(\"div\", {\n    className: \"uk-text-success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 48\n    }\n  }, translate.PayStatusOk[lang]), !!status.length && status === 'dobirka' && __jsx(\"div\", {\n    className: \"uk-text-success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 51\n    }\n  }, translate.PayStatusCash[lang]), __jsx(\"a\", {\n    href: \"/\",\n    className: \"tm-button tm-black-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, translate.backtohp[lang]));\n};\n\nexport default ThankYou;","map":{"version":3,"sources":["/Users/dmytropechunka/Desktop/work/pellwood/client/pages/thank-you/index.js"],"names":["useState","useEffect","useContext","DataStateContext","translate","gtag","AxiosAPI","useRouter","getServerSideProps","context","console","log","dataContextDispatch","state","type","get","router","query","refId","then","res","order","data","payOnline","setStatus","status","setLang","currency","catch","err","props","category","filter","item","_id","settings","titleCategory","articleFirst","shuffle","articles","lang","_ref","includes","articleSeccond","ThankYou","thankOrder","thankInfo","length","PayStatusWait","PayStatusError","PayStatusOk","PayStatusCash","backtohp"],"mappings":"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","sourcesContent":["import {useState, useEffect, useContext} from 'react'\nimport { DataStateContext } from '../../context/dataStateContext'\nimport translate from '../../data/staticTranslate'\nimport gtag from '../../functions/gtag'\nimport {AxiosAPI} from '../../restClient'\nimport { useRouter } from 'next/router'\n\nexport async function getServerSideProps(context) {\n  console.log(context);\n  // if(!router.query.refId){ router.push('/not-found'); return;}\n  return\n  dataContextDispatch({ state: [], type: 'basket' })\n  dataContextDispatch({ state: 0, type: 'basketCount' })\n\n  AxiosAPI.get(`/payment/status/${router.query.refId}`).then(res => {\n    const order = res.data.data[0]\n\n    // AxiosAPI.post(`/send/orderInfo`, res.data.data[0])\n    // .then(resMail => console.log(resMail.data))\n    // .catch(err => console.log('Send Email error --- ', err))\n\n    if(order.payOnline) {\n      setStatus(order.status)\n      if(order.status !== 'PENDING' && order.status !== 'CANCELLED'){\n        gtag(order)\n      }\n    }else{\n      setStatus('dobirka')\n      gtag(order)\n    }\n\n    setLang(res.data.data[0].currency === 'Kč' ? 'cz' : 'en')\n\n  }).catch(err => console.log('Error get status order --- ', err))\n\n  return {\n    props: {\n      category: data.category.filter(item => item?._id),\n      settings: data.settings.filter(item => item?.titleCategory)?.[0],\n      articleFirst: shuffle(data.articles.filter(item => item[lang]?.category._ref.includes(\"3252355e-13f2-4628-8db4-a90bb522713b\")), 0),\n      articleSeccond: shuffle(data.articles.filter(item => item[lang]?.category._ref.includes(\"53b17b89-299c-48b1-b332-26240fc0e624\")), 1),\n      lang,\n      currency\n    }\n  }\n}\n\nconst ThankYou = () => {\n\n  const router = useRouter()\n  const [status, setStatus] = useState('')\n  const [lang, setLang] = useState('')\n  const { dataContextDispatch } = useContext(DataStateContext)\n\n  useEffect(() => {\n\n    \n\n  }, [])\n\n  return(\n    <div className=\"thank-you-page base-page\">\n      <h1>{translate.thankOrder[lang]}</h1>\n      <p>{translate.thankInfo[lang]}</p>\n      {!!status.length && status === 'PENDING' && <div className=\"uk-text-warning\">{translate.PayStatusWait[lang]}</div>}\n      {!!status.length && status === 'CANCELLED' && <div className=\"uk-text-danger\">{translate.PayStatusError[lang]}</div>}\n      {!!status.length && status === 'PAID' && <div className=\"uk-text-success\">{translate.PayStatusOk[lang]}</div>}\n      {!!status.length && status === 'dobirka' && <div className=\"uk-text-success\">{translate.PayStatusCash[lang]}</div>}\n\n      <a href=\"/\" className=\"tm-button tm-black-button\">{translate.backtohp[lang]}</a>\n    </div>\n  )\n}\n\nexport default ThankYou\n"]},"metadata":{},"sourceType":"module"}