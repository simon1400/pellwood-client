{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect, useContext } from 'react';\nimport { DataStateContext } from '../../context/dataStateContext';\nimport Page from '../../layout/Page';\nimport Head from 'next/head';\nimport translate from '../../data/staticTranslate';\nimport gtag from '../../functions/gtag';\nimport { AxiosAPI } from '../../restClient';\nimport localize from '../../data/localize';\nexport async function getServerSideProps({\n  query,\n  locale\n}) {\n  const {\n    lang\n  } = localize(locale);\n\n  if (!query.refId) {\n    return {\n      redirect: {\n        destination: '/not-found',\n        permanent: false\n      }\n    };\n  }\n\n  const res = await AxiosAPI.get(`/payment/status/${query.refId}`);\n  const order = res.data.data[0];\n  AxiosAPI.post(`/send/orderInfo`, order).then(resMail => console.log(resMail.data)).catch(err => console.log('Send Email error --- ', err));\n  var status = '',\n      dataGtag;\n\n  if (order.payOnline) {\n    status = order.status;\n\n    if (status !== 'PENDING' && status !== 'CANCELLED') {\n      dataGtag = gtag(order);\n    }\n  } else {\n    status = 'dobirka';\n    dataGtag = gtag(order);\n  }\n\n  return {\n    props: {\n      lang,\n      status,\n      dataGtag\n    }\n  };\n}\n\nconst ThankYou = ({\n  lang,\n  status,\n  dataGtag\n}) => {\n  const {\n    dataContextDispatch\n  } = useContext(DataStateContext);\n  useEffect(() => {\n    dataContextDispatch({\n      state: [],\n      type: 'basket'\n    });\n    dataContextDispatch({\n      state: 0,\n      type: 'basketCount'\n    });\n  }, [status]);\n  return __jsx(Page, {\n    className: \"thank-you-page base-page\"\n  }, __jsx(Head, null, __jsx(\"script\", {\n    dangerouslySetInnerHTML: {\n      __html: `gtag('event', 'purchase', ${dataGtag})`\n    }\n  })), __jsx(\"h1\", null, translate.thankOrder[lang]), __jsx(\"p\", null, translate.thankInfo[lang]), !!status.length && status === 'PENDING' && __jsx(\"div\", {\n    className: \"uk-text-warning\"\n  }, translate.PayStatusWait[lang]), !!status.length && status === 'CANCELLED' && __jsx(\"div\", {\n    className: \"uk-text-danger\"\n  }, translate.PayStatusError[lang]), !!status.length && status === 'PAID' && __jsx(\"div\", {\n    className: \"uk-text-success\"\n  }, translate.PayStatusOk[lang]), !!status.length && status === 'dobirka' && __jsx(\"div\", {\n    className: \"uk-text-success\"\n  }, translate.PayStatusCash[lang]), __jsx(Link, {\n    href: \"/\"\n  }, __jsx(\"a\", {\n    className: \"tm-button tm-black-button\"\n  }, translate.backtohp[lang])));\n};\n\nexport default ThankYou;","map":null,"metadata":{},"sourceType":"module"}