{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport sanityClient from \"../lib/sanity.js\";\nimport imageUrlBuilder from \"@sanity/image-url\";\nimport Link from 'next/link';\nimport BlockContent from \"@sanity/block-content-to-react\";\nimport localize from '../data/localize';\nimport Page from '../layout/Page';\nimport Article from '../components/ArticleShort';\nimport ShortBlock from '../components/SmallShortCart';\nconst imageBuilder = imageUrlBuilder(sanityClient);\n\nconst urlFor = source => imageBuilder.image(source);\n\nexport async function getServerSideProps({\n  locale\n}) {\n  const {\n    lang,\n    currency\n  } = localize(locale);\n  const data = await sanityClient.fetch(`{\n    'homepage': *[_type == \"homepage\"] {\n      ${lang},\n      \"carts\": *[ _type == \"product\" && _id in [^.${lang}.recommendedProducts.product_1._ref, ^.${lang}.recommendedProducts.product_2._ref, ^.${lang}.recommendedProducts.product_3._ref]].${lang} | order(sort asc)\n    }[0...10],\n    'articles': *[_type == \"article\"].${lang} | order(sort asc)\n  }`);\n\n  if (lang === 'en') {\n    data.homepage[0].carts.map(item => {\n      var _item$variants;\n\n      if (typeof item.price === 'string') {\n        item.price.replace(/,/g, '.');\n      } else if ((_item$variants = item.variants) === null || _item$variants === void 0 ? void 0 : _item$variants.length) {\n        item.variants = item.variants.map(variant => {\n          variant.price = variant.price.replace(/,/g, '.');\n          return variant;\n        });\n      }\n    });\n  }\n\n  const shuffle = (a, count) => {\n    for (let i = a.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [a[i], a[j]] = [a[j], a[i]];\n    }\n\n    return a;\n  };\n\n  var articlesFilteredFirst = data.articles.filter(item => item === null || item === void 0 ? void 0 : item.category._ref.includes(\"3252355e-13f2-4628-8db4-a90bb522713b\"));\n  var articlesFilteredSeccond = data.articles.filter(item => item === null || item === void 0 ? void 0 : item.category._ref.includes(\"53b17b89-299c-48b1-b332-26240fc0e624\"));\n  const articleFirst = shuffle(articlesFilteredFirst, 0);\n  const articleSeccond = shuffle(articlesFilteredSeccond, 1);\n  return {\n    props: {\n      homepage: data.homepage[0][lang],\n      carts: data.homepage[0].carts,\n      articleFirst,\n      articleSeccond,\n      lang,\n      currency\n    }\n  };\n}\n\nconst Homepage = ({\n  homepage,\n  carts,\n  articleFirst,\n  articleSeccond,\n  lang,\n  currency\n}) => {\n  return __jsx(Page, {\n    id: \"homepage\",\n    description: homepage.descriptionHead,\n    title: homepage.titleHead,\n    image: urlFor(homepage.image).url()\n  }, __jsx(\"section\", {\n    className: \"homepage_slide\"\n  }, __jsx(\"div\", {\n    className: \"uk-inline uk-cover-container uk-height-1-1 uk-width-1-1\"\n  }, __jsx(\"div\", {\n    className: \"blanded-mix uk-width-1-1 uk-height-1-1 uk-background-cover uk-img\",\n    \"data-src\": urlFor(homepage.image).width(2400).format('webp').url(),\n    \"data-srcset\": `${urlFor(homepage.image).width(400).format('webp').url()} 400w,\n                      ${urlFor(homepage.image).width(640).format('webp').url()} 640w,\n                      ${urlFor(homepage.image).width(900).format('webp').url()} 900w,\n                      ${urlFor(homepage.image).width(1000).format('webp').url()} 1000w,\n                      ${urlFor(homepage.image).width(1600).format('webp').url()} 1600w,\n                      ${urlFor(homepage.image).width(2000).format('webp').url()} 2000w`,\n    \"uk-img\": \"\"\n  }), __jsx(\"div\", {\n    className: \"overlay uk-position-center uk-flex uk-flex-center uk-flex-middle\"\n  }, __jsx(\"div\", null, __jsx(\"h1\", {\n    className: \"contrast\",\n    \"uk-scrollspy\": \"cls: uk-animation-slide-top-small; delay: 500\"\n  }, homepage.title), __jsx(Link, {\n    href: homepage.button.url\n  }, __jsx(\"a\", {\n    className: \"tm-button tm-bare-button tm-contrast\",\n    \"uk-scrollspy\": \"cls: uk-animation-slide-top; delay: 500\"\n  }, homepage.button.title)))))), __jsx(\"section\", {\n    className: \"description uk-flex uk-flex-middle\"\n  }, __jsx(\"div\", {\n    className: \"uk-container uk-container-expand\"\n  }, __jsx(\"div\", {\n    \"uk-scrollspy\": \"cls: uk-animation-slide-top-small; delay: 500\"\n  }, __jsx(BlockContent, {\n    blocks: homepage.content\n  })))), carts.length && __jsx(ShortBlock, {\n    data: carts,\n    lang: lang,\n    currency: currency\n  }), __jsx(\"section\", {\n    className: \"section_base\"\n  }, __jsx(\"div\", {\n    className: \"uk-container uk-container-expand\"\n  }, __jsx(\"div\", {\n    className: \"uk-grid\",\n    \"uk-grid\": \"\",\n    \"uk-scrollspy\": \"target: > div > a; cls: uk-animation-slide-top-small; delay: 500\"\n  }, __jsx(\"div\", {\n    className: \"uk-width-1-1\"\n  }, __jsx(Link, {\n    href: homepage.banner.url\n  }, __jsx(\"a\", {\n    className: \"big_category big_grid\"\n  }, __jsx(\"div\", {\n    className: \"category_wrap\"\n  }, __jsx(\"div\", {\n    className: \"uk-inline uk-height-1-1 uk-width-1-1\"\n  }, __jsx(\"div\", {\n    className: \"blanded-mix uk-width-1-1 uk-height-1-1 uk-background-cover uk-img\",\n    \"data-src\": urlFor(homepage.banner.image).width(2000).url(),\n    \"uk-img\": \"\"\n  }), __jsx(\"div\", {\n    className: \"overlay uk-position-center uk-flex uk-flex-center uk-flex-middle\"\n  }, __jsx(\"h2\", {\n    className: \"category_short_name\"\n  }, homepage.banner.title))))))), articleFirst[0] ? __jsx(Article, {\n    lang: lang,\n    data: articleFirst[0],\n    firstUrl: \"sluzby\"\n  }) : '', articleSeccond[0] ? __jsx(Article, {\n    lang: lang,\n    data: articleSeccond[0],\n    firstUrl: \"o-nas\"\n  }) : ''))));\n};\n\nexport default Homepage;","map":null,"metadata":{},"sourceType":"module"}