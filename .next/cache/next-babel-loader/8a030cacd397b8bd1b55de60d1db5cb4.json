{"ast":null,"code":"var _jsxFileName = \"/Users/dmytropechunka/Desktop/work/pellwood/client/pages/index.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect } from 'react';\nimport sanityClient from \"../lib/sanity.js\";\nimport imageUrlBuilder from \"@sanity/image-url\";\nimport BlockContent from \"@sanity/block-content-to-react\";\nimport localize from '../data/localize';\nimport { useRouter } from 'next/router';\nimport Page from '../layout/Page';\nimport Article from '../components/ArticleShort';\nimport ShortBlock from '../components/SmallShortCart';\nconst imageBuilder = imageUrlBuilder(sanityClient);\n\nconst urlFor = source => imageBuilder.image(source);\n\nconst Homepage = ({\n  match\n}) => {\n  _s();\n\n  const router = useRouter();\n  const {\n    lang,\n    currency\n  } = localize(window.location.href);\n  const query = `{\n    'homepage': *[_type == \"homepage\"] {\n      ${lang},\n      \"carts\": *[ _type == \"product\" && _id in [^.${lang}.recommendedProducts.product_1._ref, ^.${lang}.recommendedProducts.product_2._ref, ^.${lang}.recommendedProducts.product_3._ref]].${lang} | order(sort asc)\n    }[0...10],\n    'articles': *[_type == \"article\"].${lang} | order(sort asc)\n  }`;\n  const {\n    0: homepage,\n    1: setHomepage\n  } = useState([]);\n  const {\n    0: carts,\n    1: setCarts\n  } = useState([]);\n  const {\n    0: articleFirst,\n    1: setArticleFirst\n  } = useState([]);\n  const {\n    0: articleSeccond,\n    1: setArticleSeccond\n  } = useState([]);\n\n  const shuffle = (a, count) => {\n    for (let i = a.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [a[i], a[j]] = [a[j], a[i]];\n    }\n\n    if (!count) setArticleFirst(a);else setArticleSeccond(a);\n  };\n\n  useEffect(() => {\n    var _match$params, _match$params$lang;\n\n    if (((_match$params = match.params) === null || _match$params === void 0 ? void 0 : (_match$params$lang = _match$params.lang) === null || _match$params$lang === void 0 ? void 0 : _match$params$lang.length) > 2) {\n      window.location.href = '/not-found';\n    }\n\n    sanityClient.fetch(query).then(data => {\n      setHomepage(data.homepage[0][lang]);\n\n      if (lang === 'en') {\n        data.homepage[0].carts.map(item => {\n          var _item$variants;\n\n          if (typeof item.price === 'string') {\n            item.price.replace(/,/g, '.');\n          } else if ((_item$variants = item.variants) === null || _item$variants === void 0 ? void 0 : _item$variants.length) {\n            item.variants = item.variants.map(variant => {\n              variant.price = variant.price.replace(/,/g, '.');\n              return variant;\n            });\n          }\n        });\n      }\n\n      setCarts(data.homepage[0].carts);\n      var articlesFilteredFirst = data.articles.filter(item => item === null || item === void 0 ? void 0 : item.category._ref.includes(\"3252355e-13f2-4628-8db4-a90bb522713b\"));\n      shuffle(articlesFilteredFirst, 0);\n      var articlesFilteredSeccond = data.articles.filter(item => item === null || item === void 0 ? void 0 : item.category._ref.includes(\"53b17b89-299c-48b1-b332-26240fc0e624\"));\n      shuffle(articlesFilteredSeccond, 1);\n    });\n  }, []);\n\n  if ((homepage === null || homepage === void 0 ? void 0 : homepage.title) !== undefined) {\n    return __jsx(Page, {\n      id: \"homepage\",\n      description: homepage.descriptionHead,\n      title: homepage.titleHead,\n      image: urlFor(homepage.image).url(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 7\n      }\n    }, __jsx(\"section\", {\n      className: \"homepage_slide\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }\n    }, __jsx(\"div\", {\n      className: \"uk-inline uk-cover-container uk-height-1-1 uk-width-1-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }\n    }, __jsx(\"div\", {\n      className: \"blanded-mix uk-width-1-1 uk-height-1-1 uk-background-cover uk-img\",\n      \"data-src\": urlFor(homepage.image).width(Math.round(window.innerWidth)).format('webp').url(),\n      \"data-srcset\": `${urlFor(homepage.image).width(400).format('webp').url()} 400w,\n                        ${urlFor(homepage.image).width(640).format('webp').url()} 640w,\n                        ${urlFor(homepage.image).width(900).format('webp').url()} 900w,\n                        ${urlFor(homepage.image).width(1000).format('webp').url()} 1000w,\n                        ${urlFor(homepage.image).width(1600).format('webp').url()} 1600w,\n                        ${urlFor(homepage.image).width(2000).format('webp').url()} 2000w`,\n      \"uk-img\": \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }\n    }), __jsx(\"div\", {\n      className: \"overlay uk-position-center uk-flex uk-flex-center uk-flex-middle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }\n    }, __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 15\n      }\n    }, __jsx(\"h1\", {\n      className: \"contrast\",\n      \"uk-scrollspy\": \"cls: uk-animation-slide-top-small; delay: 500\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }\n    }, homepage.title), __jsx(\"a\", {\n      className: \"tm-button tm-bare-button tm-contrast\",\n      \"uk-scrollspy\": \"cls: uk-animation-slide-top; delay: 500\",\n      href: homepage.button.url,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }\n    }, homepage.button.title))))), __jsx(\"section\", {\n      className: \"description uk-flex uk-flex-middle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }\n    }, __jsx(\"div\", {\n      className: \"uk-container uk-container-expand\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }\n    }, __jsx(\"div\", {\n      \"uk-scrollspy\": \"cls: uk-animation-slide-top-small; delay: 500\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }\n    }, __jsx(BlockContent, {\n      blocks: homepage.content,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 15\n      }\n    })))), carts.length && __jsx(ShortBlock, {\n      data: carts,\n      lang: lang,\n      currency: currency,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 26\n      }\n    }), __jsx(\"section\", {\n      className: \"section_base\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }\n    }, __jsx(\"div\", {\n      className: \"uk-container uk-container-expand\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }\n    }, __jsx(\"div\", {\n      className: \"uk-grid\",\n      \"uk-grid\": \"\",\n      \"uk-scrollspy\": \"target: > div > a; cls: uk-animation-slide-top-small; delay: 500\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }\n    }, __jsx(\"div\", {\n      className: \"uk-width-1-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 15\n      }\n    }, __jsx(\"a\", {\n      href: homepage.banner.url,\n      className: \"big_category big_grid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }\n    }, __jsx(\"div\", {\n      className: \"category_wrap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 19\n      }\n    }, __jsx(\"div\", {\n      className: \"uk-inline uk-height-1-1 uk-width-1-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 21\n      }\n    }, __jsx(\"div\", {\n      className: \"blanded-mix uk-width-1-1 uk-height-1-1 uk-background-cover\",\n      \"data-src\": urlFor(homepage.banner.image).width(Math.round(window.innerWidth - 80)).url(),\n      \"uk-img\": \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 23\n      }\n    }), __jsx(\"div\", {\n      className: \"overlay uk-position-center uk-flex uk-flex-center uk-flex-middle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 23\n      }\n    }, __jsx(\"h2\", {\n      className: \"category_short_name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 25\n      }\n    }, homepage.banner.title)))))), articleFirst[0] ? __jsx(Article, {\n      lang: lang,\n      data: articleFirst[0],\n      firstUrl: \"sluzby\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 34\n      }\n    }) : '', articleSeccond[0] ? __jsx(Article, {\n      lang: lang,\n      data: articleSeccond[0],\n      firstUrl: \"o-nas\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 36\n      }\n    }) : ''))));\n  } else {\n    return __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 12\n      }\n    }, \"Loadding...\");\n  }\n};\n\n_s(Homepage, \"7BSApfBL7AftpOOZjLxtKMOZ/m0=\", false, function () {\n  return [useRouter];\n});\n\n_c = Homepage;\nexport default Homepage;\n\nvar _c;\n\n$RefreshReg$(_c, \"Homepage\");","map":{"version":3,"sources":["/Users/dmytropechunka/Desktop/work/pellwood/client/pages/index.js"],"names":["useState","useEffect","sanityClient","imageUrlBuilder","BlockContent","localize","useRouter","Page","Article","ShortBlock","imageBuilder","urlFor","source","image","Homepage","match","router","lang","currency","window","location","href","query","homepage","setHomepage","carts","setCarts","articleFirst","setArticleFirst","articleSeccond","setArticleSeccond","shuffle","a","count","i","length","j","Math","floor","random","params","fetch","then","data","map","item","price","replace","variants","variant","articlesFilteredFirst","articles","filter","category","_ref","includes","articlesFilteredSeccond","title","undefined","descriptionHead","titleHead","url","width","round","innerWidth","format","button","content","banner"],"mappings":"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","sourcesContent":["import {useState, useEffect} from 'react';\nimport sanityClient from \"../lib/sanity.js\";\nimport imageUrlBuilder from \"@sanity/image-url\";\nimport BlockContent from \"@sanity/block-content-to-react\";\nimport localize from '../data/localize'\nimport { useRouter } from 'next/router'\nimport Page from '../layout/Page'\nimport Article from '../components/ArticleShort'\nimport ShortBlock from '../components/SmallShortCart'\n\nconst imageBuilder = imageUrlBuilder(sanityClient);\nconst urlFor = source => imageBuilder.image(source)\n\nconst Homepage = ({match}) => {\n\n  const router = useRouter()\n  const {lang, currency} = localize(window.location.href)\n  const query = `{\n    'homepage': *[_type == \"homepage\"] {\n      ${lang},\n      \"carts\": *[ _type == \"product\" && _id in [^.${lang}.recommendedProducts.product_1._ref, ^.${lang}.recommendedProducts.product_2._ref, ^.${lang}.recommendedProducts.product_3._ref]].${lang} | order(sort asc)\n    }[0...10],\n    'articles': *[_type == \"article\"].${lang} | order(sort asc)\n  }`;\n  const [homepage, setHomepage] = useState([])\n  const [carts, setCarts] = useState([])\n  const [articleFirst, setArticleFirst] = useState([])\n  const [articleSeccond, setArticleSeccond] = useState([])\n\n  const shuffle = (a, count) => {\n    for (let i = a.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [a[i], a[j]] = [a[j], a[i]];\n    }\n\n    if(!count) setArticleFirst(a);\n    else setArticleSeccond(a);\n\n  }\n\n  useEffect(() => {\n    if(match.params?.lang?.length > 2){\n      window.location.href = '/not-found'\n    }\n    sanityClient.fetch(query).then(data => {\n      setHomepage(data.homepage[0][lang])\n      if(lang === 'en'){\n        data.homepage[0].carts.map(item => {\n          if(typeof item.price === 'string'){\n            item.price.replace(/,/g, '.')\n          }else if(item.variants?.length){\n            item.variants = item.variants.map(variant => {\n              variant.price = variant.price.replace(/,/g, '.')\n              return variant\n            })\n          }\n        })\n      }\n      setCarts(data.homepage[0].carts)\n      var articlesFilteredFirst = data.articles.filter(item => item?.category._ref.includes(\"3252355e-13f2-4628-8db4-a90bb522713b\"))\n      shuffle(articlesFilteredFirst, 0)\n      var articlesFilteredSeccond = data.articles.filter(item => item?.category._ref.includes(\"53b17b89-299c-48b1-b332-26240fc0e624\"))\n      shuffle(articlesFilteredSeccond, 1)\n    })\n\n  }, [])\n\n  if(homepage?.title !== undefined){\n    return (\n      <Page id=\"homepage\" description={homepage.descriptionHead} title={homepage.titleHead} image={urlFor(homepage.image).url()}>\n\n        <section className=\"homepage_slide\">\n          <div className=\"uk-inline uk-cover-container uk-height-1-1 uk-width-1-1\">\n\n            <div\n              className=\"blanded-mix uk-width-1-1 uk-height-1-1 uk-background-cover uk-img\"\n              data-src={urlFor(homepage.image).width(Math.round(window.innerWidth)).format('webp').url()}\n              data-srcset={`${urlFor(homepage.image).width(400).format('webp').url()} 400w,\n                        ${urlFor(homepage.image).width(640).format('webp').url()} 640w,\n                        ${urlFor(homepage.image).width(900).format('webp').url()} 900w,\n                        ${urlFor(homepage.image).width(1000).format('webp').url()} 1000w,\n                        ${urlFor(homepage.image).width(1600).format('webp').url()} 1600w,\n                        ${urlFor(homepage.image).width(2000).format('webp').url()} 2000w`}\n              uk-img=\"\"></div>\n            <div className=\"overlay uk-position-center uk-flex uk-flex-center uk-flex-middle\">\n              <div >\n                <h1 className=\"contrast\" uk-scrollspy=\"cls: uk-animation-slide-top-small; delay: 500\">{homepage.title}</h1>\n                <a className=\"tm-button tm-bare-button tm-contrast\" uk-scrollspy=\"cls: uk-animation-slide-top; delay: 500\" href={homepage.button.url}>{homepage.button.title}</a>\n              </div>\n            </div>\n          </div>\n        </section>\n\n        <section className=\"description uk-flex uk-flex-middle\">\n          <div className=\"uk-container uk-container-expand\">\n            <div uk-scrollspy=\"cls: uk-animation-slide-top-small; delay: 500\">\n              <BlockContent blocks={homepage.content} />\n            </div>\n          </div>\n        </section>\n\n        {carts.length && <ShortBlock data={carts} lang={lang} currency={currency}/>}\n\n        <section className=\"section_base\">\n          <div className=\"uk-container uk-container-expand\">\n            <div className=\"uk-grid\" uk-grid=\"\" uk-scrollspy=\"target: > div > a; cls: uk-animation-slide-top-small; delay: 500\">\n              <div className=\"uk-width-1-1\">\n                <a href={homepage.banner.url} className=\"big_category big_grid\">\n                  <div className=\"category_wrap\">\n                    <div className=\"uk-inline uk-height-1-1 uk-width-1-1\">\n                      <div className=\"blanded-mix uk-width-1-1 uk-height-1-1 uk-background-cover\" data-src={urlFor(homepage.banner.image).width(Math.round(window.innerWidth - 80)).url()} uk-img=\"\"></div>\n                      <div className=\"overlay uk-position-center uk-flex uk-flex-center uk-flex-middle\">\n                        <h2 className=\"category_short_name\">{homepage.banner.title}</h2>\n                      </div>\n                    </div>\n                  </div>\n                </a>\n              </div>\n\n              {articleFirst[0] ? <Article lang={lang} data={articleFirst[0]} firstUrl=\"sluzby\"/> : ''}\n              {articleSeccond[0] ? <Article lang={lang} data={articleSeccond[0]} firstUrl=\"o-nas\"/> : ''}\n\n            </div>\n          </div>\n        </section>\n      </Page>\n    )\n  }else{\n    return <div>Loadding...</div>\n  }\n\n};\n\nexport default Homepage\n"]},"metadata":{},"sourceType":"module"}