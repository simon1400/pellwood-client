{"ast":null,"code":"var _jsxFileName = \"/Users/dmytropechunka/Desktop/work/pellwood/client/components/Body/index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useContext } from 'react';\nimport { DataStateContext } from '../../context/dataStateContext';\nimport Body from './Body';\nimport { Route } from 'react-router-dom';\nimport { useRouter } from 'next/router';\nimport localize from '../../data/localize';\n\nconst BodyWrap = ({\n  setSum,\n  basket,\n  setBasket\n}) => {\n  const router = useRouter();\n  const {\n    lang\n  } = localize(router.locale);\n  const routes = ['/basket', `/${lang}/basket`];\n  const {\n    dataContextState,\n    dataContextDispatch\n  } = useContext(DataStateContext);\n\n  const changeCount = (index, handle) => {\n    var newBasket = basket;\n\n    if (handle === 'down' && newBasket[index].countVariant > 1) {\n      newBasket[index].countVariant = +basket[index].countVariant - 1;\n    } else if (handle === 'up') {\n      newBasket[index].countVariant = +basket[index].countVariant + 1;\n    }\n\n    setBasket([...newBasket]);\n    dataContextDispatch({\n      state: newBasket,\n      type: 'basket'\n    });\n    sumBasket(newBasket);\n  };\n\n  const sumBasket = newBasket => {\n    var sumAll = 0,\n        sumItem = 0;\n    newBasket.map((item, index) => {\n      if (item.variantPrice instanceof String) {\n        sumItem = +item.variantPrice.split(' ')[0] * item.countVariant;\n      } else {\n        sumItem = item.variantPrice * item.countVariant;\n      }\n\n      sumAll = +sumItem + sumAll;\n    });\n    setSum(sumAll);\n  };\n\n  const handleChange = (index, value) => {\n    let newBasket = basket;\n    newBasket[index].countVariant = value;\n    setBasket([...newBasket]);\n    dataContextDispatch({\n      state: newBasket,\n      type: 'basket'\n    });\n  };\n\n  const deleteItem = (e, index) => {\n    var basketCount = dataContextState.basketCount;\n    basketCount = basketCount - 1;\n    dataContextDispatch({\n      state: basketCount,\n      type: 'basketCount'\n    });\n    let newBasket = basket;\n    newBasket.splice(index, 1);\n    setBasket([...newBasket]);\n    dataContextDispatch({\n      state: newBasket,\n      type: 'basket'\n    });\n    sumBasket(newBasket);\n  };\n\n  return __jsx(React.Fragment, null, routes.map((item, index) => __jsx(Route, {\n    exact: true,\n    key: index,\n    path: item,\n    render: () => __jsx(Body, {\n      basket: basket,\n      deleteItem: deleteItem,\n      handleChange: handleChange,\n      sumBasket: sumBasket,\n      changeCount: changeCount,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 85\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 34\n    }\n  })));\n};\n\nexport default BodyWrap;","map":{"version":3,"sources":["/Users/dmytropechunka/Desktop/work/pellwood/client/components/Body/index.js"],"names":["useContext","DataStateContext","Body","Route","useRouter","localize","BodyWrap","setSum","basket","setBasket","router","lang","locale","routes","dataContextState","dataContextDispatch","changeCount","index","handle","newBasket","countVariant","state","type","sumBasket","sumAll","sumItem","map","item","variantPrice","String","split","handleChange","value","deleteItem","e","basketCount","splice"],"mappings":"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","sourcesContent":["import {useContext} from 'react'\nimport { DataStateContext } from '../../context/dataStateContext'\nimport Body from './Body'\nimport {Route} from 'react-router-dom'\nimport { useRouter } from 'next/router'\nimport localize from '../../data/localize'\n\n\nconst BodyWrap = ({\n  setSum,\n  basket,\n  setBasket\n}) => {\n\n  const router = useRouter()\n  const {lang} = localize(router.locale)\n  const routes = ['/basket', `/${lang}/basket`]\n  const { dataContextState, dataContextDispatch } = useContext(DataStateContext)\n\n  const changeCount = (index, handle) => {\n    var newBasket = basket\n    if(handle === 'down' && newBasket[index].countVariant > 1){\n      newBasket[index].countVariant = +basket[index].countVariant - 1\n    }else if(handle === 'up'){\n      newBasket[index].countVariant = +basket[index].countVariant + 1\n    }\n    setBasket([...newBasket])\n    dataContextDispatch({ state: newBasket, type: 'basket' })\n\n    sumBasket(newBasket)\n  }\n\n  const sumBasket = (newBasket) => {\n    var sumAll = 0, sumItem = 0;\n    newBasket.map((item, index) => {\n      if(item.variantPrice instanceof String){\n        sumItem = +item.variantPrice.split(' ')[0] * item.countVariant\n      }else{\n        sumItem = item.variantPrice * item.countVariant\n      }\n      sumAll = +sumItem + sumAll\n    })\n\n    setSum(sumAll)\n  }\n\n  const handleChange = (index, value) => {\n    let newBasket = basket\n    newBasket[index].countVariant = value\n    setBasket([...newBasket])\n    dataContextDispatch({ state: newBasket, type: 'basket' })\n  }\n\n  const deleteItem = (e, index) => {\n    var basketCount = dataContextState.basketCount\n    basketCount = basketCount - 1\n    dataContextDispatch({ state: basketCount, type: 'basketCount' })\n    let newBasket = basket\n    newBasket.splice(index, 1)\n    setBasket([...newBasket])\n    dataContextDispatch({ state: newBasket, type: 'basket' })\n    sumBasket(newBasket)\n  }\n\n\n\n  return <>\n    {routes.map((item, index) => <Route exact key={index} path={item} render={() => <Body\n      basket={basket}\n      deleteItem={deleteItem}\n      handleChange={handleChange}\n      sumBasket={sumBasket}\n      changeCount={changeCount}\n    />}/>)}\n  </>\n}\n\nexport default BodyWrap\n"]},"metadata":{},"sourceType":"module"}