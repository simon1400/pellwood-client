{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect, useContext } from 'react';\nimport { DataStateContext } from '../../context/dataStateContext';\nimport translate from '../../data/staticTranslate';\nimport getUrl from '../../functionss/getSearch';\nimport gtag from '../../functionss/gtag';\nimport { AxiosAPI } from '../../restClient';\n\nconst ThankYou = () => {\n  const {\n    0: status,\n    1: setStatus\n  } = useState('');\n  const {\n    0: lang,\n    1: setLang\n  } = useState('');\n  const {\n    dataContextDispatch\n  } = useContext(DataStateContext);\n  useEffect(() => {\n    var serchUrl = getUrl(window.location.search);\n\n    if (!serchUrl.refId) {\n      window.location.href = '/not-found';\n      return;\n    }\n\n    dataContextDispatch({\n      state: [],\n      type: 'basket'\n    });\n    dataContextDispatch({\n      state: 0,\n      type: 'basketCount'\n    });\n    AxiosAPI.get(`${process.env.REACT_APP_API}/payment/status/${serchUrl.refId}`).then(res => {\n      const order = res.data.data[0];\n      AxiosAPI.post(`${process.env.REACT_APP_API}/send/orderInfo`, res.data.data[0]).then(resMail => console.log(resMail.data)).catch(err => console.log('Send Email error --- ', err));\n\n      if (order.payOnline) {\n        setStatus(order.status);\n\n        if (order.status !== 'PENDING' && order.status !== 'CANCELLED') {\n          gtag(order);\n        }\n      } else {\n        setStatus('dobirka');\n        gtag(order);\n      }\n\n      setLang(res.data.data[0].currency === 'KÄ' ? 'cz' : 'en');\n    }).catch(err => console.log('Error get status order --- ', err));\n  }, []);\n  return __jsx(\"div\", {\n    className: \"thank-you-page base-page\"\n  }, __jsx(\"h1\", null, translate.thankOrder[lang]), __jsx(\"p\", null, translate.thankInfo[lang]), !!status.length && status === 'PENDING' && __jsx(\"div\", {\n    className: \"uk-text-warning\"\n  }, translate.PayStatusWait[lang]), !!status.length && status === 'CANCELLED' && __jsx(\"div\", {\n    className: \"uk-text-danger\"\n  }, translate.PayStatusError[lang]), !!status.length && status === 'PAID' && __jsx(\"div\", {\n    className: \"uk-text-success\"\n  }, translate.PayStatusOk[lang]), !!status.length && status === 'dobirka' && __jsx(\"div\", {\n    className: \"uk-text-success\"\n  }, translate.PayStatusCash[lang]), __jsx(\"a\", {\n    href: \"/\",\n    className: \"tm-button tm-black-button\"\n  }, translate.backtohp[lang]));\n};\n\nexport default ThankYou;","map":null,"metadata":{},"sourceType":"module"}