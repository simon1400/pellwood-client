{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { useContext } from 'react';\nimport { DataStateContext } from '../../context/dataStateContext';\nimport Body from './Body';\n\nconst BodyWrap = ({\n  setSum,\n  basket,\n  setBasket\n}) => {\n  const {\n    dataContextState,\n    dataContextDispatch\n  } = useContext(DataStateContext);\n\n  const changeCount = (index, handle) => {\n    var newBasket = basket;\n\n    if (handle === 'down' && newBasket[index].countVariant > 1) {\n      newBasket[index].countVariant = +basket[index].countVariant - 1;\n    } else if (handle === 'up') {\n      newBasket[index].countVariant = +basket[index].countVariant + 1;\n    }\n\n    setBasket([...newBasket]);\n    dataContextDispatch({\n      state: newBasket,\n      type: 'basket'\n    });\n    sumBasket(newBasket);\n  };\n\n  const sumBasket = newBasket => {\n    var sumAll = 0,\n        sumItem = 0;\n    newBasket.map((item, index) => {\n      if (item.variantPrice instanceof String) {\n        sumItem = +item.variantPrice.split(' ')[0] * item.countVariant;\n      } else {\n        sumItem = item.variantPrice * item.countVariant;\n      }\n\n      sumAll = +sumItem + sumAll;\n    });\n    setSum(sumAll);\n  };\n\n  const handleChange = (index, value) => {\n    let newBasket = basket;\n    newBasket[index].countVariant = value;\n    setBasket([...newBasket]);\n    dataContextDispatch({\n      state: newBasket,\n      type: 'basket'\n    });\n  };\n\n  const deleteItem = (e, index) => {\n    var basketCount = dataContextState.basketCount;\n    basketCount = basketCount - 1;\n    dataContextDispatch({\n      state: basketCount,\n      type: 'basketCount'\n    });\n    let newBasket = basket;\n    newBasket.splice(index, 1);\n    setBasket([...newBasket]);\n    dataContextDispatch({\n      state: newBasket,\n      type: 'basket'\n    });\n    sumBasket(newBasket);\n  };\n\n  return __jsx(Body, {\n    basket: basket,\n    deleteItem: deleteItem,\n    handleChange: handleChange,\n    sumBasket: sumBasket,\n    changeCount: changeCount\n  });\n};\n\nexport default BodyWrap;","map":null,"metadata":{},"sourceType":"module"}