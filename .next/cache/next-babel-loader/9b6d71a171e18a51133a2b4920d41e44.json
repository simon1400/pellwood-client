{"ast":null,"code":"import _toConsumableArray from \"/Users/dmytropechunka/Desktop/work/pellwood/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useContext } from 'react';\nimport { DataStateContext } from '../../context/dataStateContext';\nimport Body from './Body';\n\nvar BodyWrap = function BodyWrap(_ref) {\n  var setSum = _ref.setSum,\n      basket = _ref.basket,\n      setBasket = _ref.setBasket;\n\n  var _useContext = useContext(DataStateContext),\n      dataContextState = _useContext.dataContextState,\n      dataContextDispatch = _useContext.dataContextDispatch;\n\n  var changeCount = function changeCount(index, handle) {\n    var newBasket = basket;\n\n    if (handle === 'down' && newBasket[index].countVariant > 1) {\n      newBasket[index].countVariant = +basket[index].countVariant - 1;\n    } else if (handle === 'up') {\n      newBasket[index].countVariant = +basket[index].countVariant + 1;\n    }\n\n    setBasket(_toConsumableArray(newBasket));\n    dataContextDispatch({\n      state: newBasket,\n      type: 'basket'\n    });\n    sumBasket(newBasket);\n  };\n\n  var sumBasket = function sumBasket(newBasket) {\n    var sumAll = 0,\n        sumItem = 0;\n    newBasket.map(function (item, index) {\n      if (item.variantPrice instanceof String) {\n        sumItem = +item.variantPrice.split(' ')[0] * item.countVariant;\n      } else {\n        sumItem = item.variantPrice * item.countVariant;\n      }\n\n      sumAll = +sumItem + sumAll;\n    });\n    setSum(sumAll);\n  };\n\n  var handleChange = function handleChange(index, value) {\n    var newBasket = basket;\n    newBasket[index].countVariant = value;\n    setBasket(_toConsumableArray(newBasket));\n    dataContextDispatch({\n      state: newBasket,\n      type: 'basket'\n    });\n  };\n\n  var deleteItem = function deleteItem(e, index) {\n    var basketCount = dataContextState.basketCount;\n    basketCount = basketCount - 1;\n    dataContextDispatch({\n      state: basketCount,\n      type: 'basketCount'\n    });\n    var newBasket = basket;\n    newBasket.splice(index, 1);\n    setBasket(_toConsumableArray(newBasket));\n    dataContextDispatch({\n      state: newBasket,\n      type: 'basket'\n    });\n    sumBasket(newBasket);\n  };\n\n  return __jsx(Body, {\n    basket: basket,\n    deleteItem: deleteItem,\n    handleChange: handleChange,\n    sumBasket: sumBasket,\n    changeCount: changeCount\n  });\n};\n\nexport default BodyWrap;","map":null,"metadata":{},"sourceType":"module"}