{"ast":null,"code":"var _jsxFileName = \"/Users/dmytropechunka/Desktop/work/pellwood/client/pages/user/index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useState, useEffect, useContext } from 'react';\nimport AnimateHeight from 'react-animate-height';\nimport Delivery from '../../components/user/delivery.js';\nimport Corporate from '../../components/user/corporate.js';\nimport { DataStateContext } from '../../context/dataStateContext';\nimport { AxiosAPI } from '../../restClient';\nimport translate from '../../data/staticTranslate';\nimport validationForm from '../../functions/validationForm';\nimport localize from '../../data/localize';\nimport { useRouter } from 'next/router';\n\nconst User = () => {\n  const router = useRouter();\n  const {\n    lang,\n    currency\n  } = localize(router.local);\n  const {\n    dataContextState,\n    dataContextDispatch\n  } = useContext(DataStateContext);\n  const {\n    0: user\n  } = useState(dataContextState.user);\n  const {\n    0: orders,\n    1: setOrders\n  } = useState([]);\n  const state = useState({\n    email: user.email,\n    phone: user.phone,\n    name: user.name,\n    surname: user.surname,\n    country: user.country,\n    city: user.city,\n    address: user.address,\n    code: user.code,\n    anotherAddressCheck: false,\n    companyDataCheck: false\n  });\n  const {\n    0: error,\n    1: setError\n  } = useState({\n    email: false,\n    phone: false,\n    name: false,\n    surname: false,\n    city: false,\n    address: false,\n    code: false\n  });\n  const anotherAdress = useState(_objectSpread({}, user.anotherAdress));\n  const companyData = useState(_objectSpread({}, user.companyData));\n  useEffect(() => {\n    AxiosAPI.get(`${process.env.REACT_APP_API}/order/${state[0].email}`).then(res => {\n      setOrders(res.data.data);\n    });\n  }, []);\n\n  const handleChange = (name, value) => {\n    let newState = state[0];\n    newState[name] = value;\n    state[1](_objectSpread({}, newState));\n  };\n\n  const onSave = async e => {\n    if (!state[0].address.length) {\n      setError(_objectSpread(_objectSpread({}, error), {}, {\n        address: true\n      }));\n      return;\n    } else if (!state[0].city.length) {\n      setError(_objectSpread(_objectSpread({}, error), {}, {\n        city: true\n      }));\n      return;\n    } else if (!state[0].surname.length) {\n      setError(_objectSpread(_objectSpread({}, error), {}, {\n        surname: true\n      }));\n      return;\n    } else if (!state[0].name.length) {\n      setError(_objectSpread(_objectSpread({}, error), {}, {\n        name: true\n      }));\n      return;\n    } else if (!state[0].phone.length) {\n      setError(_objectSpread(_objectSpread({}, error), {}, {\n        phone: true\n      }));\n      return;\n    } else if (!state[0].code.length) {\n      setError(_objectSpread(_objectSpread({}, error), {}, {\n        code: true\n      }));\n      return;\n    }\n\n    if (onBlur('email')) return;\n\n    let saveData = _objectSpread(_objectSpread({\n      id: user._id\n    }, state[0]), {}, {\n      anotherAdress: anotherAdress[0],\n      companyData: companyData[0]\n    });\n\n    await AxiosAPI.put(`${process.env.REACT_APP_API}/user`, {\n      data: saveData,\n      type: 'update'\n    }).then(res => {\n      dataContextDispatch({\n        state: res.data.data,\n        type: 'user'\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const onLogout = () => {\n    dataContextDispatch({\n      state: null,\n      type: 'user'\n    });\n    dataContextDispatch({\n      state: {},\n      type: 'user'\n    });\n    router.push('/');\n  };\n\n  const onBlur = type => {\n    if (validationForm(type, state[0], error, setError)) {\n      return true;\n    }\n\n    return false;\n  };\n\n  return __jsx(\"main\", {\n    className: \"basket user\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"tm-basket-content-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"tm-basket-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"tm-basket-head\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, __jsx(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, translate.yourAccount[lang])), __jsx(Delivery, {\n    state: state[0],\n    setState: state[1],\n    error: error,\n    setError: setError,\n    onBlur: onBlur,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  }), __jsx(\"div\", {\n    className: \"uk-margin-small checkbox_item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  }, __jsx(\"input\", {\n    type: \"checkbox\",\n    id: \"checkbox_firm_data\",\n    onChange: () => handleChange('companyDataCheck', !state[0].companyDataCheck),\n    checked: state[0].companyDataCheck,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }), __jsx(\"label\", {\n    htmlFor: \"checkbox_firm_data\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }), __jsx(\"label\", {\n    htmlFor: \"checkbox_firm_data\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, translate.checkcompanydata[lang])), __jsx(AnimateHeight, {\n    duration: 500,\n    height: state[0].companyDataCheck ? 'auto' : 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 11\n    }\n  }, __jsx(Corporate, {\n    state: companyData[0],\n    setState: companyData[1],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  })), __jsx(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 11\n    }\n  }), __jsx(\"div\", {\n    className: \"form_column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, __jsx(\"button\", {\n    className: \"tm-button tm-bare-button\",\n    onClick: () => onLogout(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 15\n    }\n  }, translate.logOut[lang])), __jsx(\"div\", {\n    className: \"uk-text-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, __jsx(\"button\", {\n    className: \"tm-button tm-black-button\",\n    onClick: e => onSave(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 15\n    }\n  }, translate.save[lang]))))), __jsx(\"div\", {\n    className: \"basket-right-panel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"basket-right-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"last_order_wrap tm-total-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 11\n    }\n  }, __jsx(\"table\", {\n    className: \"uk-table uk-table-small uk-table-divider\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }, __jsx(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }, __jsx(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 15\n    }\n  }, __jsx(\"th\", {\n    colSpan: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 17\n    }\n  }, translate.orderHistory[lang]))), __jsx(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }\n  }, (orders === null || orders === void 0 ? void 0 : orders.length) ? orders.map(item => __jsx(\"tr\", {\n    key: item._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 17\n    }\n  }, __jsx(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 19\n    }\n  }, translate.orderNumber[lang], \" \", item.idOrder), __jsx(\"td\", {\n    className: \"uk-text-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 19\n    }\n  }, item.sum, \" \", ' ' + currency))) : __jsx(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 17\n    }\n  }, __jsx(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 19\n    }\n  }, translate.noOrder[lang]), __jsx(\"td\", {\n    className: \"uk-text-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 19\n    }\n  }))))))));\n};\n\nexport default User;","map":{"version":3,"sources":["/Users/dmytropechunka/Desktop/work/pellwood/client/pages/user/index.js"],"names":["useState","useEffect","useContext","AnimateHeight","Delivery","Corporate","DataStateContext","AxiosAPI","translate","validationForm","localize","useRouter","User","router","lang","currency","local","dataContextState","dataContextDispatch","user","orders","setOrders","state","email","phone","name","surname","country","city","address","code","anotherAddressCheck","companyDataCheck","error","setError","anotherAdress","companyData","get","process","env","REACT_APP_API","then","res","data","handleChange","value","newState","onSave","e","length","onBlur","saveData","id","_id","put","type","catch","err","console","log","onLogout","push","yourAccount","checkcompanydata","logOut","save","orderHistory","map","item","orderNumber","idOrder","sum","noOrder"],"mappings":"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","sourcesContent":["import {useState, useEffect, useContext} from 'react'\nimport AnimateHeight from 'react-animate-height';\nimport Delivery from '../../components/user/delivery.js'\nimport Corporate from '../../components/user/corporate.js'\nimport { DataStateContext } from '../../context/dataStateContext'\nimport {AxiosAPI} from '../../restClient'\nimport translate from '../../data/staticTranslate'\nimport validationForm from '../../functions/validationForm'\nimport localize from '../../data/localize'\nimport { useRouter } from 'next/router'\n\nconst User = () => {\n\n  const router = useRouter()\n  const {lang, currency} = localize(router.local)\n  const { dataContextState, dataContextDispatch } = useContext(DataStateContext)\n  const [user] = useState(dataContextState.user)\n  const [orders, setOrders] = useState([])\n\n  const state = useState({\n    email: user.email,\n    phone: user.phone,\n    name: user.name,\n    surname: user.surname,\n    country: user.country,\n    city: user.city,\n    address: user.address,\n    code: user.code,\n    anotherAddressCheck: false,\n    companyDataCheck: false\n  })\n\n  const [error, setError] = useState({\n    email: false,\n    phone: false,\n    name: false,\n    surname: false,\n    city: false,\n    address: false,\n    code: false\n  })\n\n  const anotherAdress = useState({...user.anotherAdress})\n\n  const companyData = useState({...user.companyData})\n\n\n  useEffect(() => {\n    AxiosAPI.get(`${process.env.REACT_APP_API}/order/${state[0].email}`).then(res => {\n      setOrders(res.data.data)\n    })\n  }, [])\n\n  const handleChange = (name, value) => {\n    let newState = state[0];\n    newState[name] = value;\n    state[1]({...newState})\n  }\n\n  const onSave = async e => {\n\n    if(!state[0].address.length) {setError({...error, address: true}); return;}\n    else if(!state[0].city.length) {setError({...error, city: true}); return;}\n    else if(!state[0].surname.length) {setError({...error, surname: true}); return;}\n    else if(!state[0].name.length) {setError({...error, name: true}); return;}\n    else if(!state[0].phone.length) {setError({...error, phone: true}); return;}\n    else if(!state[0].code.length) {setError({...error, code: true}); return;}\n\n    if(onBlur('email')) return;\n\n    let saveData = {\n      id: user._id,\n      ...state[0],\n      anotherAdress: anotherAdress[0],\n      companyData: companyData[0]\n    }\n    await AxiosAPI.put(`${process.env.REACT_APP_API}/user`, {data: saveData, type: 'update'}).then(res => {\n      dataContextDispatch({ state: res.data.data, type: 'user' })\n    }).catch(err => {\n      console.log(err);\n    })\n  }\n\n  const onLogout = () => {\n    dataContextDispatch({ state: null, type: 'user' })\n    dataContextDispatch({ state: {}, type: 'user' })\n    router.push('/')\n  }\n\n  const onBlur = (type) => {\n    if(validationForm(type, state[0], error, setError)){\n      return true\n    }\n    return false\n  }\n\n  return(\n    <main className=\"basket user\">\n      <div className=\"tm-basket-content-wrap\">\n        <div className=\"tm-basket-content\">\n          <div className=\"tm-basket-head\">\n            <h1>{translate.yourAccount[lang]}</h1>\n          </div>\n          <Delivery state={state[0]} setState={state[1]} error={error} setError={setError} onBlur={onBlur}/>\n\n          <div className=\"uk-margin-small checkbox_item\">\n            <input type=\"checkbox\" id=\"checkbox_firm_data\" onChange={() => handleChange('companyDataCheck', !state[0].companyDataCheck)} checked={state[0].companyDataCheck} />\n            <label htmlFor=\"checkbox_firm_data\"></label>\n            <label htmlFor=\"checkbox_firm_data\">{translate.checkcompanydata[lang]}</label>\n          </div>\n\n          <AnimateHeight duration={ 500 } height={ state[0].companyDataCheck ? 'auto' : 0 } >\n            <Corporate state={companyData[0]} setState={companyData[1]} />\n          </AnimateHeight>\n\n          <hr />\n\n          <div className=\"form_column\">\n            <div>\n              <button className=\"tm-button tm-bare-button\" onClick={() => onLogout()}>{translate.logOut[lang]}</button>\n            </div>\n            <div className=\"uk-text-right\">\n              <button className=\"tm-button tm-black-button\" onClick={e => onSave()}>{translate.save[lang]}</button>\n            </div>\n          </div>\n\n        </div>\n      </div>\n      <div className=\"basket-right-panel\">\n        <div className=\"basket-right-content\">\n          <div className=\"last_order_wrap tm-total-end\">\n          <table className=\"uk-table uk-table-small uk-table-divider\">\n            <thead>\n              <tr>\n                <th colSpan=\"2\">{translate.orderHistory[lang]}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {orders?.length ? orders.map(item =>\n                <tr key={item._id}>\n                  <td>{translate.orderNumber[lang]} {item.idOrder}</td>\n                  <td className=\"uk-text-right\">{item.sum} {' ' + currency}</td>\n                </tr>)\n              : <tr>\n                  <td>{translate.noOrder[lang]}</td>\n                  <td className=\"uk-text-right\"></td>\n                </tr>}\n            </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    </main>\n  )\n}\n\n\nexport default User\n"]},"metadata":{},"sourceType":"module"}