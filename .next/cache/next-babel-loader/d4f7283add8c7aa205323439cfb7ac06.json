{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect, useContext } from 'react';\nimport { DataStateContext } from '../../context/dataStateContext';\nimport translate from '../../data/staticTranslate';\nimport getUrl from '../../functionss/getSearch';\nimport gtag from '../../functionss/gtag';\nimport { AxiosAPI } from '../../restClient';\n\nvar ThankYou = function ThankYou() {\n  var _useState = useState(''),\n      status = _useState[0],\n      setStatus = _useState[1];\n\n  var _useState2 = useState(''),\n      lang = _useState2[0],\n      setLang = _useState2[1];\n\n  var _useContext = useContext(DataStateContext),\n      dataContextDispatch = _useContext.dataContextDispatch;\n\n  useEffect(function () {\n    var serchUrl = getUrl(window.location.search);\n\n    if (!serchUrl.refId) {\n      window.location.href = '/not-found';\n      return;\n    }\n\n    dataContextDispatch({\n      state: [],\n      type: 'basket'\n    });\n    dataContextDispatch({\n      state: 0,\n      type: 'basketCount'\n    });\n    AxiosAPI.get(\"\".concat(process.env.REACT_APP_API, \"/payment/status/\").concat(serchUrl.refId)).then(function (res) {\n      var order = res.data.data[0];\n      AxiosAPI.post(\"\".concat(process.env.REACT_APP_API, \"/send/orderInfo\"), res.data.data[0]).then(function (resMail) {\n        return console.log(resMail.data);\n      }).catch(function (err) {\n        return console.log('Send Email error --- ', err);\n      });\n\n      if (order.payOnline) {\n        setStatus(order.status);\n\n        if (order.status !== 'PENDING' && order.status !== 'CANCELLED') {\n          gtag(order);\n        }\n      } else {\n        setStatus('dobirka');\n        gtag(order);\n      }\n\n      setLang(res.data.data[0].currency === 'Kƒç' ? 'cz' : 'en');\n    }).catch(function (err) {\n      return console.log('Error get status order --- ', err);\n    });\n  }, []);\n  return __jsx(\"div\", {\n    className: \"thank-you-page base-page\"\n  }, __jsx(\"h1\", null, translate.thankOrder[lang]), __jsx(\"p\", null, translate.thankInfo[lang]), !!status.length && status === 'PENDING' && __jsx(\"div\", {\n    className: \"uk-text-warning\"\n  }, translate.PayStatusWait[lang]), !!status.length && status === 'CANCELLED' && __jsx(\"div\", {\n    className: \"uk-text-danger\"\n  }, translate.PayStatusError[lang]), !!status.length && status === 'PAID' && __jsx(\"div\", {\n    className: \"uk-text-success\"\n  }, translate.PayStatusOk[lang]), !!status.length && status === 'dobirka' && __jsx(\"div\", {\n    className: \"uk-text-success\"\n  }, translate.PayStatusCash[lang]), __jsx(\"a\", {\n    href: \"/\",\n    className: \"tm-button tm-black-button\"\n  }, translate.backtohp[lang]));\n};\n\nexport default ThankYou;","map":null,"metadata":{},"sourceType":"module"}