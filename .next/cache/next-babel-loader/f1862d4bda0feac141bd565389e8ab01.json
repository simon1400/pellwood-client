{"ast":null,"code":"var _jsxFileName = \"/Users/dmytropechunka/Desktop/work/pellwood/client/pages/basket/index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect, useContext } from 'react';\nimport { DataStateContext } from '../../context/dataStateContext';\nimport translate from '../../data/staticTranslate';\nimport { useRouter } from 'next/router';\nimport Head from '../../components/Head';\nimport Body from '../../components/Body';\nimport Total from '../../components/Total';\nimport ButtonsSubmit from '../../components/ButtonsSubmit';\nimport localize from '../../data/localize';\n\nconst Basket = () => {\n  const router = useRouter();\n  const {\n    lang\n  } = localize(router.locale);\n  const {\n    dataContextState,\n    dataContextDispatch\n  } = useContext(DataStateContext);\n  const {\n    0: sum,\n    1: setSum\n  } = useState(0);\n  const {\n    0: sumBefore,\n    1: setSumBefore\n  } = useState(0);\n  const {\n    0: sale,\n    1: setSale\n  } = useState(0);\n  const {\n    0: basket,\n    1: setBasket\n  } = useState(dataContextState.basket);\n  useEffect(() => {\n    if (!(basket === null || basket === void 0 ? void 0 : basket.length)) {\n      window.location.href = '/';\n    }\n  }, [basket]);\n  useEffect(() => {\n    sumTotal(0, 0);\n  }, []);\n  useEffect(() => {\n    sumTotal(deliveryMethod[0].price, paymentMethod[0].price);\n  }, [deliveryMethod, paymentMethod]);\n\n  const sumTotal = (delivery, payment) => {\n    var sumAll = 0,\n        sumItem = 0;\n    var newBasket = basket;\n    newBasket.map((item, index) => {\n      if (item.variantPrice instanceof String) sumItem = +item.variantPrice * item.countVariant;else sumItem = item.variantPrice * item.countVariant;\n      sumAll = +sumItem + sumAll;\n    });\n    let sumItemsBefore = sumAll;\n    setSumBefore(sumItemsBefore);\n    if (lang === 'en' && sumAll > 150) setSale((Math.round(sumAll * 0.05 * 100) / 100).toFixed(2));else if (lang === 'cz' && sumAll > 2000) setSale(Math.round(sumAll * 0.05));\n\n    if (lang === 'cz' && sumAll > 2000 || lang === 'en' && sumAll > 150) {\n      setSumBefore(Math.round(sumAll - sumAll * 0.05));\n      sumAll = sumAll - sumAll * 0.05;\n    }\n\n    if (lang === 'en' && sumAll <= 150 || lang === 'cz' && sumAll <= 2000) setSale(0);\n\n    if (delivery || payment) {\n      if (delivery !== translate.free[lang] && (lang === 'en' && sumAll <= 100 || lang === 'cz' && sumAll <= 1500)) sumAll = +sumAll + +delivery.split(' ')[0];\n      if (payment !== translate.free[lang]) sumAll = +sumAll + +payment.split(' ')[0];\n    }\n\n    if (lang === 'en') setSum((Math.round(sumAll * 100) / 100).toFixed(2));else setSum(Math.round(sumAll));\n  };\n\n  return __jsx(\"main\", {\n    className: \"basket\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"tm-basket-content-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"tm-basket-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  }), __jsx(Body, {\n    setSum: setSum,\n    sum: sum,\n    basket: basket,\n    setBasket: setBasket,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 11\n    }\n  }))), __jsx(\"div\", {\n    className: \"basket-right-panel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"basket-right-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, __jsx(Total, {\n    sum: sumBefore,\n    sale: sale,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 11\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, translate.infovat[lang])), __jsx(\"div\", {\n    className: \"tm-basket-footer tm-footer-single total-end-footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }\n  }, __jsx(ButtonsSubmit, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  })))));\n};\n\nexport default Basket;","map":{"version":3,"sources":["/Users/dmytropechunka/Desktop/work/pellwood/client/pages/basket/index.js"],"names":["useState","useEffect","useContext","DataStateContext","translate","useRouter","Head","Body","Total","ButtonsSubmit","localize","Basket","router","lang","locale","dataContextState","dataContextDispatch","sum","setSum","sumBefore","setSumBefore","sale","setSale","basket","setBasket","length","window","location","href","sumTotal","deliveryMethod","price","paymentMethod","delivery","payment","sumAll","sumItem","newBasket","map","item","index","variantPrice","String","countVariant","sumItemsBefore","Math","round","toFixed","free","split","infovat"],"mappings":"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","sourcesContent":["import {useState, useEffect, useContext} from 'react';\nimport { DataStateContext } from '../../context/dataStateContext'\nimport translate from '../../data/staticTranslate'\nimport { useRouter } from 'next/router'\nimport Head from '../../components/Head'\nimport Body from '../../components/Body'\nimport Total from '../../components/Total'\nimport ButtonsSubmit from '../../components/ButtonsSubmit'\n\nimport localize from '../../data/localize'\n\nconst Basket = () => {\n\n  const router = useRouter()\n  const {lang} = localize(router.locale)\n  const { dataContextState, dataContextDispatch } = useContext(DataStateContext)\n  const [sum, setSum] = useState(0)\n  const [sumBefore, setSumBefore] = useState(0)\n  const [sale, setSale] = useState(0)\n  const [basket, setBasket] = useState(dataContextState.basket)\n\n  useEffect(() => {\n    if(!basket?.length){\n      window.location.href = '/'\n    }\n  }, [basket])\n\n  useEffect(() => {\n    sumTotal(0, 0)\n  }, [])\n\n  useEffect(() => {\n    sumTotal(deliveryMethod[0].price, paymentMethod[0].price)\n  }, [deliveryMethod, paymentMethod])\n\n  const sumTotal = (delivery, payment) => {\n    var sumAll = 0, sumItem = 0;\n    var newBasket = basket\n    newBasket.map((item, index) => {\n\n      if(item.variantPrice instanceof String)sumItem = +item.variantPrice * item.countVariant\n      else sumItem = item.variantPrice * item.countVariant\n\n      sumAll = +sumItem + sumAll\n    })\n\n    let sumItemsBefore = sumAll\n    setSumBefore(sumItemsBefore)\n\n    if(lang === 'en' && sumAll > 150) setSale((Math.round(sumAll * 0.05 * 100) / 100).toFixed(2))\n    else if(lang === 'cz' && sumAll > 2000) setSale(Math.round(sumAll * 0.05))\n\n    if(lang === 'cz' && sumAll > 2000 || lang === 'en' && sumAll > 150){\n      setSumBefore(Math.round(sumAll - (sumAll * 0.05)))\n      sumAll = sumAll - (sumAll * 0.05)\n    }\n\n    if(lang === 'en' && sumAll <= 150 || lang === 'cz' && sumAll <= 2000) setSale(0)\n\n    if(delivery || payment){\n      if(delivery !== translate.free[lang] && ((lang === 'en' && sumAll <= 100) || (lang === 'cz' && sumAll <= 1500))) sumAll = +sumAll + +delivery.split(' ')[0]\n      if(payment !== translate.free[lang]) sumAll = +sumAll + +payment.split(' ')[0]\n    }\n\n    if(lang === 'en') setSum((Math.round(sumAll * 100) / 100).toFixed(2))\n    else setSum(Math.round(sumAll))\n  }\n\n\n  return (\n    <main className=\"basket\">\n      <div className=\"tm-basket-content-wrap\">\n        <div className=\"tm-basket-content\">\n          <Head />\n          <Body\n            setSum={setSum}\n            sum={sum}\n            basket={basket}\n            setBasket={setBasket} />\n        </div>\n      </div>\n      <div className=\"basket-right-panel\">\n        <div className=\"basket-right-content\">\n          <Total sum={sumBefore} sale={sale} />\n          <div>\n            <p>{translate.infovat[lang]}</p>\n          </div>\n          <div className=\"tm-basket-footer tm-footer-single total-end-footer\">\n            <ButtonsSubmit />\n          </div>\n        </div>\n      </div>\n    </main>\n  )\n}\nexport default Basket\n"]},"metadata":{},"sourceType":"module"}